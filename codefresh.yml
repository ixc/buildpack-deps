version: '1.0'

steps:
  main_clone:
    type: git-clone
    repo: ixc/buildpack-deps

  build_images:
    type: build
    image_name: interaction/buildpack-deps
    no_cache: true
    buildkit: true
    scale:
      build_bionic:
        dockerfile: bionic/Dockerfile
        tag: bionic
      build_focal:
        dockerfile: focal/Dockerfile
        tag: focal

  push_images:
    type: push
    scale:
      push_bionic:
        candidate: '${{build_bionic}}'
        tag: bionic
      push_focal:
        candidate: '${{build_focal}}'
        tag: focal
      push_latest:
        candidate: '${{build_focal}}'
        tag: latest

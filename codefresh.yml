version: '1.0'

steps:
  main_clone:
    type: git-clone
    title: Cloning Git Repository
    repo: ixc/buildpack-deps

  build_image:
    type: build
    image_name: interaction/buildpack-deps
    no_cache: true
    title: Building Images
    scale:
      build_bionic:
        dockerfile: bionic/Dockerfile
        tag: bionic
      build_focal:
        title: Building Focal
        dockerfile: focal/Dockerfile
        tag: focal

  push_image:
    type: push
    title: Pushing Images to Default Registry
    scale:
      push_bionic:
        candidate: '${{build_bionic}}'
        tag: bionic
      push_focal:
        candidate: '${{build_focal}}'
        tag: focal
